var URL,device_height,device_width;URL="http://shortfilm.staging.wpengine.com",device_width="",device_height="";var shortFilmWindow;shortFilmWindow=angular.module("SFWApp",["ionic","ngCordova","ngAnimate","ngSanitize","ion-sticky","ionicLazyLoad","vimeoEmbed","ionic.ion.imageCacheFactory","templates"]),shortFilmWindow.value("ParseConfiguration",{applicationId:"DMhdPZNQAUzklzpPb9Lhp8qHZFjcVU9klP0jxLsO",javascriptKey:"TTrki92xoLK7s4POTGeFk4i2Ynm8tPbPl7QrKl7K",clientKey:"gsGvDg9ZkEqzwqYZiFsTZZsMQxdCQ9EcNbrTWAY5",masterKey:"LALmaz73J44ndeC2n7vuuySMVLGHUSTEQADmJPKN",installationId:""}),shortFilmWindow.run(["$ionicPlatform","$state","$rootScope","App","$timeout","$window","$cordovaNetwork","$cordovaToast","DetailsAPI","ParseConfiguration",function(e,t,i,r,n,a,o,l,s,c){return e.ready(function(){var e,t;return i.App=r,t=a.innerWidth,e=a.innerHeight,r.navigate("appInitialize")}),i.$on("$stateChangeSuccess",function(e,t,n,a,o){return"notifications"===t.name?i.pageHeader="Notifications":i.pageHeader="Shortfilm Window",""===a.name&&"init"===t.name?r.fromNotification=1:r.previousState=a.name,r.currentState=t.name}),i.$on("$stateChangeStart",function(e,t,i,r,n){return""!==r.name&&"appInitialize"===t.name?(console.log("prevent"),e.preventDefault()):void 0})}]),shortFilmWindow.config(["$compileProvider","$ionicConfigProvider",function(e,t){return t.scrolling.jsScrolling(!1),e.debugInfoEnabled(!1)}]),$(document).ready(function(){var e;return e=$(".box").width(),$(".box").removeClass("hideSearch"),$(".box").removeClass("showSearch"),$(".slide-right").click(function(){return $(".box").removeClass("showSearch"),$(".box").addClass("hideSearch"),setTimeout(function(){return $(".box").removeClass("hideSearch"),$(".box").addClass("removeBox")},1e3),setTimeout(function(){return $(".box i.searchIcon").hide()},500)}),$(".slide-left").click(function(){return $(".box").removeClass("removeBox"),$(".box").removeClass("hideSearch"),$(".box").addClass("showSearch"),setTimeout(function(){return $(".box.showSearch i.searchIcon").show()},700)})});var htmlEnDeCode;htmlEnDeCode=function(){var e,t,i,r,n,a,o,l;return i=void 0,n=void 0,t=void 0,r=void 0,l=function(){t={},r={},e({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},e=function(e){var a,o,l,s,c;a=[],l=[],s=void 0,o=void 0;for(c in e)o=e[c],r[c]=o,t[o]=c,a.push(o),l.push(c);i=new RegExp("("+a.join("|")+")","g"),n=new RegExp("("+l.join("|")+"|&#[0-9]{1,5};)","g")},o=function(e){var r;return r=function(e,i){return t[i]},e?String(e).replace(i,r):e},a=function(e){var t;return t=function(e,t){return t in r?r[t]:String.fromCharCode(parseInt(t.substr(2),10))},e?String(e).replace(n,t):e},l(),{htmlEncode:o,htmlDecode:a}}(),shortFilmWindow.factory("App",["$state","$ionicHistory","$window","$cordovaNetwork",function(e,t,i,r){var n;return n=void 0,n={start:!0,unreadNotifications:0,menuEnabled:{left:!1,right:!1},previousState:"",currentState:"",fromNotification:0,notificationPayload:[],navigate:function(i,r,n){var a,o;return a=void 0,o=void 0,null===r&&(r={}),null===n&&(n={}),_.isEmpty(n)||(a=_.has(n,"animate")?n.animate:!1,o=_.has(n,"back")?n.back:!1,t.nextViewOptions({disableAnimate:!a,disableBack:!o})),e.go(i,r)},getbackView:function(){return console.log(t.backView())},goBack:function(i){return this.fromNotification?(this.fromNotification=0,e.go("popular")):t.goBack(i)},isAndroid:function(){return ionic.Platform.isAndroid()},isIOS:function(){return ionic.Platform.isIOS()},isWebView:function(){return ionic.Platform.isWebView()},isOnline:function(){return this.isWebView()?r.isOnline():navigator.onLine},deviceUUID:function(){return this.isWebView()?device.uuid:"DUMMYUUID"},hideKeyboardAccessoryBar:function(){return i.cordova&&i.cordova.plugins.Keyboard?$cordovaKeyboard.hideAccessoryBar(!0):void 0}}}]),shortFilmWindow.directive("ajError",[function(){return{restrict:"E",replace:!0,templateUrl:"Global/error.html",scope:{tapToRetry:"&",errorType:"="},link:function(e,t,i){var r,n,a;switch(e.errorType){case"offline":n="No internet availability",a="Error",r="Retry";break;case"server_error":n="Could not connect to server";break;case"no_Search_result":n="No results found",a="Result",r="Close";break;default:n="Something Went Wrong",a="Error",r="Retry"}return e.errorMsg=n,e.errorTitle=a,e.button=r,e.onTryAgain=function(){return e.tapToRetry()}}}}]),shortFilmWindow.factory("share",["$q","App","$http",function(e,t,i){var r;return r={},r.shareNative=function(e,t){var i;if(null==t&&(t=""),console.log("Sharing video"),window.plugins&&window.plugins.socialsharing){switch(t){case"":i=URL+"/"+e;break;default:i=URL+"/"+t+"/"+e}return window.plugins.socialsharing.share(null,"shortFilm Window",null,i,function(){return console.log("Success")},function(e){return console.log("Share fail "+e)})}return console.log("Share plugin not available")},r}]),shortFilmWindow.controller("watchlistCtrl",["$scope","Storage","DetailsAPI","App","$window","$ionicScrollDelegate","$timeout",function(e,t,i,r,n,a,o){return e.watchlistDetails=[],e.display="loader",e.watchFlag="0",e.refreshSwiper=!0,e.addvideoDetails=[],e.init=function(){return e.getData()},e.getData=function(){return t.watchlistDetails("get").then(function(t){var i,r;return e.watchlistDetails=t,_.isNull(e.watchlistDetails)?(e.display="no_result",e.$apply()):e.watchlistDetails.length>0?(r=n.innerWidth,i=n.innerHeight,e.used_height=115,e.hgt=i-e.used_height,e.display="result",e.$apply()):(e.display="no_result",e.$apply())})},e.updatewatchlist=function(t){return e.CheckWatchlist(t),a.resize()},e.singlePlayService=function(e){return i.singleVideoarray.movie_id=e.movie_id,i.singleVideoarray.singleVideoarray=e,r.navigate("init")},e.CheckWatchlist=function(i){var r;return r=_.findLastIndex(e.watchlistDetails,{movie_id:i}),e.watchlistDetails.splice(r,1),t.watchlistDetails("set",e.watchlistDetails),_.isNull(e.watchlistDetails)||0===e.watchlistDetails.length?e.display="no_result":(e.refreshSwiper=!1,o(function(){var t,i;return e.refreshSwiper=!0,i=n.innerWidth,t=n.innerHeight,e.used_height=115,e.hgt=t-e.used_height},100))}}]),shortFilmWindow.controller("playerCtrl",["$scope","$sce","DetailsAPI","$ionicHistory","App","$timeout",function(e,t,i,r,n,a){var o,l,s;return e.videoDetails=i.singleVideoarray,e.videourl=e.videoDetails.singleVideoarray.videourl,e.switchHeaderBar=!0,a(function(){return e.switchHeaderBar=!e.switchHeaderBar},5e3),e.toggleHeader=function(){return e.switchHeaderBar=!e.switchHeaderBar,a(function(){return e.switchHeaderBar=!e.switchHeaderBar,e.$apply()},5e3)},e.view={back:function(){var e;return e=-1,n.goBack(e)},vType:e.videoDetails.singleVideoarray.type,vimomeo:!0,init:function(){var i,r;return"vimeo"===this.vType?(i=e.videoDetails.singleVideoarray.embedurl,this.vimomeo=!0,e.player1=t.trustAsResourceUrl(i)):(this.vimomeo=!1,r=new YT.Player("player2",{height:"100%",width:"100%",videoId:e.videourl,playerVars:{autoplay:1,rel:0,wmode:"transparent",modestbranding:1},events:{onReady:o,onStateChange:l}}))}},o=function(e){return e.target.playVideo()},l=function(e){var t;return e.data!==YT.PlayerState.PLAYING||t?void 0:(setTimeout(s,6e3),t=!0)},s=function(){return player.stopVideo()}}]),shortFilmWindow.factory("DetailsAPI",["$q","App","$http","$ImageCacheFactory",function(e,t,i,r){var n;return n={},n.videoId="",n.array_addition=[],n.array_noteworthy=[],n.array_awplaylist=[],n.genre_array=[],n.playlist_array=[],n.Global_array=[],n.GlobalChild_array=[],n.Filter=[],n.Sort=[],n.array=[],n.singleVideoarray=[],n.imagArray=[],n.initialize=0,n.GetVideoDetails=function(){var t;return t=e.defer(),i.get(URL+"/wp-json/get_defaults").then(function(e){return t.resolve(e.data)},function(e){return t.reject(e)}),t.promise},n.GetSingleVideo=function(t){var r;return r=e.defer(),i.get(URL+("/wp-json/get_video?id="+t)).then(function(e){return r.resolve(e.data)},function(e){return r.reject(e)}),r.promise},n.searchResult=function(t){var r;return r=e.defer(),i.get(URL+("/wp-json/search?str="+t)).then(function(e){return r.resolve(e.data)},function(e){return r.reject(e)}),r.promise},n.setData=function(e){return null==e&&(e={}),n.array=e.premiere,n.array_addition=e.new_addition,n.array_noteworthy=e.noteworthy,n.array_awplalist=e.awesome_playlist,n.genre_array=e.genre,n.playlist_array=e.playlist,n.initialize=1},n}]),shortFilmWindow.factory("PulltorefreshAPI",["$q","App","$http","DetailsAPI",function(e,t,i,r){var n;return n={},n.pullrequest=function(){var t;return t=e.defer(),i.get(URL+"/wp-json/get_defaults").then(function(e){return t.resolve(e.data)},function(e){return t.reject(e)}),t.promise},n.saveData=function(e){return null==e&&(e={}),r.array=e.premiere,r.array_addition=e.new_addition,r.array_noteworthy=e.noteworthy,r.array_awplalist=e.awesome_playlist,r.genre_array=e.genre,r.playlist_array=e.playlist},n}]),shortFilmWindow.filter("encodeDecodeFilter",function(){return function(e){return htmlEnDeCode.htmlDecode(e)}}),shortFilmWindow.directive("isLoaded",function(){return{scope:!1,restrict:"A",link:function(e,t,i){return e.$last?e.$emit("content-changed"):void 0}}}),shortFilmWindow.directive("scrollWatch",function(e){return function(t,i,r){var n,a;return n=0,a=150,i.bind("scroll",function(t){return t.detail.scrollTop-n>a?e.slideHeader=!0:e.slideHeader=!1,e.slideHeaderPrevious>=t.detail.scrollTop-n&&(e.slideHeader=!1),e.slideHeaderPrevious=t.detail.scrollTop-n,e.$apply()})}}),shortFilmWindow.directive("swiper",function(){return{link:function(e,t,i){return e.$on("content-changed",function(){return new Swiper(t,{direction:"vertical",pagination:".swiper-pagination",paginationClickable:!0,onSlideChangeEnd:function(t){return e.currSwiper=t,e.$apply(i.detectSwiperSlide)},onSlideChangeStart:function(t){return e.currSwiper=t,e.$apply(i.detectSwiperSlide)}})})}}}),shortFilmWindow.controller("InitCtrl",["$scope","$sce","App","DetailsAPI","$ionicLoading","$ionicHistory","share","Storage","InitialiseService","ParseNotificationService","$rootScope",function(e,t,i,r,n,a,o,l,s,c,u){var d,h,p;return e.Videodetails=[],e.addvideoDetails=[],e.getwatchlistDetails=[],e.watchFlag="0",e.intFlag="0",e.watchlistimg="",e.showLoaderOrSynopsis=!0,e.showVideo=!1,e.share=function(e){return o.shareNative(e)},e.addwatchlist=function(){return e.CheckWatchlist()},e.checkIfaddedlist=function(){return l.watchlistDetails("get").then(function(t){var i;if(e.getwatchlistDetails=t,_.isNull(e.getwatchlistDetails)||0===e.getwatchlistDetails.length)return e.watchlistimg="icon-favorite",e.$apply();for(i=0;i<e.getwatchlistDetails.length;)e.getwatchlistDetails[i].movie_id===e.Videodetails.movie_id&&(e.intFlag="1"),i++;return"1"===e.intFlag?(e.watchlistimg="icon-unfavorite",e.$apply()):(e.watchlistimg="icon-favorite",e.$apply())})},e.CheckWatchlist=function(){return l.watchlistDetails("get").then(function(t){var i,n;return e.getwatchlistDetails=t,_.isNull(e.getwatchlistDetails)||0===e.getwatchlistDetails.length?(e.addvideoDetails.push(r.singleVideoarray),l.watchlistDetails("set",e.addvideoDetails),e.watchlistimg="icon-unfavorite",e.$apply()):(i=_.findLastIndex(e.getwatchlistDetails,{movie_id:r.singleVideoarray.movie_id}),-1!==i?(e.getwatchlistDetails.splice(i,1),n=e.getwatchlistDetails,e.addvideoDetails=n,l.watchlistDetails("set",e.addvideoDetails),e.watchlistimg="icon-favorite",e.$apply()):(e.getwatchlistDetails.push(r.singleVideoarray),n=e.getwatchlistDetails,e.addvideoDetails=n,l.watchlistDetails("set",e.addvideoDetails),e.watchlistimg="icon-unfavorite",e.$apply()))})},e.init=function(t){return null==t&&(t=""),angular.isUndefined(r.singleVideoarray.movie_id)?r.GetSingleVideo(t).then(function(t){return function(t){var i;return e.display="result",i={movie_id:t.movie_id,singleVideoarray:t},r.singleVideoarray=i,e.Videodetails=t,e.Videodetails,e.showLoaderOrSynopsis=!1,document.getElementById("synopsis").outerHTML=e.Videodetails.content,e.initPlayer()}}(this),function(e){return function(e){return console.log("error")}}(this)):(e.display="result",e.Videodetails=r.singleVideoarray.singleVideoarray,e.checkIfaddedlist(),r.GetSingleVideo(r.singleVideoarray.movie_id).then(function(t){return e.showLoaderOrSynopsis=!1,document.getElementById("synopsis").outerHTML=t.content,e.initPlayer()},function(e){return function(e){return console.log("error")}}(this)))},e.initPlayer=function(){var i,n,a;return e.vType=r.singleVideoarray.singleVideoarray.type,e.videourl=r.singleVideoarray.singleVideoarray.videourl,"vimeo"===e.vType?(a=document.createElement("a"),a.href=r.singleVideoarray.singleVideoarray.embedurl,i=a.protocol+"//"+a.hostname+a.pathname,e.player1=t.trustAsResourceUrl(i)):n=new YT.Player("player2",{height:"100%",width:"100%",videoId:e.videourl,playerVars:{autoplay:0,rel:0,wmode:"transparent",modestbranding:1},events:{onReady:d,onStateChange:h}})},d=function(e){return e.target.playVideo()},h=function(e){var t;return e.data!==YT.PlayerState.PLAYING||t?void 0:(setTimeout(p,6e3),t=!0)},p=function(){return player.stopVideo()},e.initializeApp=function(){return e.display="loader",c.updateNotificationStatus(i.notificationPayload.payload.notificationId).then(function(t){return e.init(r.videoId)})["catch"](function(t){return e.init(r.videoId)})},e.view={onTapToRetry:function(){return e.init()},back:function(){var e;return r.singleVideoarray=[],e=-1,i.goBack(e)},playVideo:function(){return e.showVideo=!0}},i.fromNotification?e.initializeApp():e.init(),e.showSynopsisDiv=!1}]),shortFilmWindow.controller("appInitializeCtrl",["$scope","App","DetailsAPI","InitialiseService","ParseConfiguration","$rootScope",function(e,t,i,r,n,a){return e.initApp=function(){var i,o;return Parse.initialize(n.applicationId,n.javascriptKey,n.masterKey),t.isWebView()&&(ParsePushPlugin.getInstallationObjectId(function(e){return n.installationId=e},function(e){return n.installationId=0}),window.ParsePushPlugin.on("openPN",function(e){return a.$broadcast("openNotification",{payload:e})}),window.ParsePushPlugin.on("receivePN",function(e){return a.$broadcast("receiveNotification",{payload:e})})),o=document.createElement("script"),o.src="https://www.youtube.com/iframe_api",i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(o,i),e.display="loader",e.errorType="offline",r.initialize().then(function(i){return t.isOnline()?t.navigate("popular"):e.display="error"},function(t){return e.display="error"})},e.initApp()}]),shortFilmWindow.controller("navigateCtrl",[function(){}]).config(["$stateProvider","$urlRouterProvider",function(e,t){return e.state("appInitialize",{url:"/appInitialize","abstract":!1,controller:"appInitializeCtrl",templateUrl:"landingVideo/appInitialize.html"}).state("home",{url:"/sidebar","abstract":!0,controller:"sidebarCtrl",templateUrl:"home/home.html"}).state("tabhome",{url:"/homeTab",parent:"home","abstract":!0,views:{homeview:{templateUrl:"home/homeTab.html"}}}).state("popular",{url:"/popular",parent:"tabhome",views:{popularContent:{templateUrl:"tabs/popular/popular.html",controller:"popularCtrl"}}}).state("genre",{cache:!0,url:"/genre",parent:"tabhome",views:{genreContent:{templateUrl:"tabs/genre/genre.html",controller:"genreCtrl",params:{data:null}}}}).state("playlist",{url:"/playlist",parent:"tabhome",views:{playlistContent:{templateUrl:"tabs/playlist/playlist.html",controller:"playlistCtrl"}}}).state("watchList",{url:"/watchList",cache:!1,parent:"home",views:{homeview:{templateUrl:"watchlist/myWatchlist.html",controller:"watchlistCtrl"}}}).state("notifications",{url:"/notifications",cache:!1,parent:"home",views:{homeview:{templateUrl:"notification/notifications.html",controller:"notificationsCtrl"}}}).state("init",{url:"/init",cache:!1,controller:"InitCtrl",templateUrl:"singlevideo/movieScreen.html"}).state("singlePlayer",{url:"/singlePlayer",cache:!1,controller:"playerCtrl",templateUrl:"singlevideo/singlePlayer.html"}).state("landingvideo",{url:"/landing",cache:!1,controller:"landingCtrl",templateUrl:"landingVideo/splash.html"}).state("navbar",{url:"/navbar","abstract":!1,templateUrl:"home/navBar.html"}).state("singleGenre",{url:"/singleGenre",cache:!1,controller:"singleGenre",templateUrl:"tabs/genre/singleGenre.html"}).state("singlePlaylist",{url:"/singlePlaylist",cache:!1,controller:"singlePlaylist",templateUrl:"tabs/playlist/singlePlaylist.html"})}]),shortFilmWindow.controller("notificationsCtrl",["$rootScope","$scope","App","PulltorefreshAPI","DetailsAPI","$ionicLoading","$stateParams","ParseNotificationService","Storage","$timeout","$window",function(e,t,i,r,n,a,o,l,s,c,u){return t.notificationArray=[],e.$on("receiveNotification",function(e,i){return t.getNotifications()}),t.view={onTapToRetry:function(){return t.getNotifications()}},t.getNotifications=function(){return e.$broadcast("refreshContent",{}),t.hgt=u.innerHeight-88,t.swiperhgt=t.hgt-31,i.isOnline()?(t.result="loader",s.watchlistDetails("get").then(function(e){return _.isNull(e)&&(e=[]),t.getwatchlistDetails=e,l.getNotificationsWithStatus().then(function(e){return 0===e.length?(t.result="no-new-notifications",t.initWatchlist):(t.refreshSwiper=!1,t.notificationArray=e,c(function(){return t.refreshSwiper=!0,t.result="display"},50))})["catch"](function(e){return t.result="error"})})):t.result="error"},t.clearNotifications=function(){return i.isOnline()?(t.notificationArray=[],t.result="no-new-notifications",e.unreadNotificationCount=0,l.deleteNotifications().then(function(e){return console.log(e)})["catch"](function(e){return t.result="error"})):t.result="error"},t.markNotificationAsRead=function(r){var n;return i.isOnline()?(n=_.findLastIndex(t.notificationArray,{notificationId:""+r}),t.notificationArray[n].status="read",e.unreadNotificationCount&&e.unreadNotificationCount--,l.updateNotificationStatus(r).then(function(e){return console.log(e)})["catch"](function(e){return t.result="error"})):t.result="error"},t.checkIfaddedToWatchList=function(e){var i;return t.getwatchlistDetails.length>0?(i=_.findIndex(t.getwatchlistDetails,{movie_id:e}),-1!==i?"selected":"notselected"):"notselected"},t.findIndexInWatchlist=function(e){var i;return i=_.findIndex(t.getwatchlistDetails,{movie_id:e})},t.addwatchlist=function(e,i){var r,n;return t.markNotificationAsRead(i),n={movie_id:e.movie_id,singleVideoarray:e},r=t.findIndexInWatchlist(e.movie_id),-1===r?(t.getwatchlistDetails.push(n),s.watchlistDetails("set",t.getwatchlistDetails)):(t.getwatchlistDetails.splice(r,1),s.watchlistDetails("set",t.getwatchlistDetails))},t.singlePlayService=function(e,r){return t.markNotificationAsRead(r),n.singleVideoarray.movie_id=e.movie_id,n.singleVideoarray.singleVideoarray=e,i.navigate("init")}}]),shortFilmWindow.service("InitialiseService",["$q","DetailsAPI","App","$rootScope","$ImageCacheFactory",function(e,t,i,r,n){return{initialize:function(){var a;return a=void 0,a=void 0,a=e.defer(),i.isOnline()?t.GetVideoDetails().then(function(e){return r.vData=e}).then(function(e){var i;return i=[],_.each(e.defaults.content,function(e,t){switch(t){case"genre":return _.each(e,function(e){return i.push(e.genre_image_url)});case"playlists":return _.each(e,function(e){return i.push(e.playlist_image_url)});case"popular":return _.each(e,function(e,t){switch(t){case"awesome_playlist":return _.each(e.awesome_playlist,function(e){return i.push(e.playlist_image_url)});case"new_additions":return _.each(e.new_additions,function(e){return i.push(e.image)});case"weekly_premiere":return _.each(e.weekly_premiere,function(e){return i.push(e.image)})}})}}),n.Cache([i]),t.setData({premiere:r.vData.defaults.content.popular.weekly_premiere,new_addition:r.vData.defaults.content.popular.new_additions,noteworthy:r.vData.defaults.content.popular.noteworthy,awesome_playlist:r.vData.defaults.content.popular.awesome_playlist,genre:r.vData.defaults.content.genre,playlist:r.vData.defaults.content.playlists}),a.resolve(r.vData)}):a.reject(),a.promise}}}]),shortFilmWindow.service("ParseNotificationService",["$q","$window","ParseConfiguration","$rootScope",function(e,t,i,r){return{getNotificationsWithStatus:function(){var t,r;return t=e.defer(),r=i.installationId,Parse.Cloud.run("listAllNotificationsForUser",{installation_id:r},{success:function(e){var i;i=[],_.each(e,function(e){var t,r;return t={},e.attributes.notificationId.attributes.movieDetails&&(t=angular.fromJson(decodeURIComponent(e.attributes.notificationId.attributes.movieDetails))),r={fromnow:moment(e.attributes.createdAt).fromNow(),createdAt:e.attributes.createdAt,notificationId:e.attributes.notificationId.id,installationId:e.attributes.installationId.id,alert:e.attributes.notificationId.attributes.alert,movieDetails:t,status:e.attributes.status},i.push(r)}),t.resolve(i)},error:function(e){t.reject(e)}}),t.promise},getUnreadNotificationsCount:function(){var t,r;return t=e.defer(),r=i.installationId,Parse.Cloud.run("countUnreadNotifications",{installation_id:r},{success:function(e){t.resolve(e)},error:function(e){t.reject("0")}}),t.promise},updateNotificationStatus:function(t){var r,n;return r=e.defer(),n=i.installationId,Parse.Cloud.run("updateNotificationStatusAsRead",{installation_id:n,notification_id:t},{success:function(e){r.resolve(e)},error:function(e){r.reject(e)}}),r.promise},deleteNotifications:function(){var t,r;return t=e.defer(),r=i.installationId,Parse.Cloud.run("deleteAllNotification",{installation_id:r},{success:function(e){t.resolve(e)},error:function(e){t.reject(e)}}),t.promise}}}]),shortFilmWindow.controller("sidebarCtrl",function(e,t,i,r,n,a,o,l,s,c,u){e.showsearchbar=!1,e.display="tabview",e.errorType="",e.SearchResult=[],e.classname="",e.watchListCount="0",e.afterSearch=!1,t.unreadNotificationCount=0,e.getwatchlistDetails=[],e.checkIfaddedToWatchList=function(t){var i;return e.getwatchlistDetails.length>0?(i=_.findIndex(e.getwatchlistDetails,{movie_id:t}),-1!==i?"selected":"notselected"):"notselected"},e.findIndexInWatchlist=function(t){var i;return i=_.findIndex(e.getwatchlistDetails,{movie_id:t})},e.addwatchlist=function(t){var i,r;return r={movie_id:t.movie_id,singleVideoarray:t},i=e.findIndexInWatchlist(t.movie_id),-1===i?(e.getwatchlistDetails.push(r),c.watchlistDetails("set",e.getwatchlistDetails)):(e.getwatchlistDetails.splice(i,1),c.watchlistDetails("set",e.getwatchlistDetails))},t.$on("openNotification",function(e,i){return a.fromNotification=1,o.videoId=131,t.unreadNotificationCount&&t.unreadNotificationCount--,a.notificationPayload=i,a.navigate("init")}),t.$on("receiveNotification",function(e,i){return t.unreadNotificationCount++}),e.device_height=s.innerHeight,e.hgt=parseInt(e.device_height)-parseInt(45),e.getwatchlistcount=function(){return c.watchlistDetails("get").then(function(t){return _.isNull(t)&&(t=[]),e.watchlistDetails=t,0===e.watchlistDetails.length?(e.watchListCount="0",e.$apply()):e.watchlistDetails.length>0?(e.watchListCount=e.watchlistDetails.length,e.$apply()):(e.watchListCount="0",e.$apply())})},t.getnotificationcount=function(){return u.getUnreadNotificationsCount().then(function(e){return t.unreadNotificationCount=e})},e.singlePlayService=function(e){return o.singleVideoarray.movie_id=e.movie_id,o.singleVideoarray.singleVideoarray=e,a.navigate("init")},e.searchMovie=function(){return c.watchlistDetails("get").then(function(t){var i,r;return _.isNull(t)&&(t=[]),e.watchlistDetails=t,e.afterSearch=!1,i=document.getElementById("autocomplete"),r=i.value,e.display="loader",o.searchResult(r).then(function(t){return function(t){var i,r;return e.afterSearch=!0,e.SearchResult=t,r=s.innerWidth,i=s.innerHeight,e.used_height=32,e.hgt=i-e.used_height,0===e.SearchResult.length?(e.errorType="no_Search_result",e.display="error"):(e.classname="searchResult",e.display="searchresult")}}(this),function(t){return function(t){return e.errorType="offline",e.display="error"}}(this))})},e.onTapToRetry=function(){return""===e.errorType?e.searchMovie():e.hideSearch()},e.hideSearch=function(){return e.display="tabview"},e.SeacrchClicked=function(){return e.showsearchbar=!0},e.hide=function(){return l.hide(),{hideOnStateChange:!1}},e.displayWeb=function(e){return n.toggleLeft(),window.open(e,"_system"),!0},e.submit=function(){return a.navigate("onlineSubmit")},e.slideContent=function(){e.getwatchlistcount(),n.toggleLeft()},e.openModal=function(){e.taskModal.show()},e.closeModal=function(){e.taskModal.hide()},e.showPopup=function(){var t;e.data={},t=r.show({template:'<input class="padding" type="password" ng-modal="data-wifi">',title:"Enter Wi-Fi Password",subTitle:"Please use normal things",scope:e,buttons:[{text:"Cancel"},{text:"Save",cssClass:"test",type:"button-positive"}]})}}),shortFilmWindow.factory("Storage",["$rootScope",function(e){var t;return t={},t.watchlistDetails=function(t,i){switch(t){case"set":return localforage.setItem("watchlist_details",i,function(t,r){return e.$broadcast("watchListUpdate",i)});case"get":return localforage.getItem("watchlist_details");case"remove":return localforage.removeItem("watchlist_details")}},t}]),shortFilmWindow.controller("genreCtrl",["$rootScope","$scope","App","PulltorefreshAPI","DetailsAPI","$ionicLoading","$stateParams",function(e,t,i,r,n,a,o){return t.notificationPayload=o.data,t.doRefresh=function(){return r.pullrequest().then(function(e){return function(e){return r.saveData({premiere:e.defaults.content.popular.weekly_premiere,new_addition:e.defaults.content.popular.new_additions,noteworthy:e.defaults.content.popular.noteworthy,awesome_playlist:e.defaults.content.popular.awesome_playlist,genre:e.defaults.content.genre,playlist:e.defaults.content.playlists}),t.genreobj=n.genre_array,t.$broadcast("scroll.refreshComplete"),a.hide()}}(this),function(e){return function(e){return t.$broadcast("scroll.refreshComplete"),a.hide()}}(this))},t.init=function(){return t.genre=n.genre_array},t.singleGenre=function(e){return n.videoId=e,i.navigate("singleGenre")}}]),shortFilmWindow.factory("GenreAPI",["$q","App","$http",function(e,t,i){var r;return r={},r.GetSingleGenre=function(t){var r;return r=e.defer(),i.get(URL+("/wp-json/get_genre_videos?genre_id="+t)).then(function(e){return r.resolve(e.data)},function(e){return r.reject(e)}),r.promise},r.ApplyFilter=function(t){var r;return r=e.defer(),i.get(URL+("/wp-json/get_genre_videos?genre_id="+t[0]+"&sort_key="+t[1]+"&language_id="+t[2])).then(function(e){return r.resolve(e.data)},function(e){return r.reject(e)}),r.promise},r}]),shortFilmWindow.controller("singleGenre",["$scope","$ionicLoading","App","GenreAPI","DetailsAPI","$ionicHistory","share","$window","Storage","$timeout",function(e,t,i,r,n,a,o,l,s,c){return e.lang=null,e.sort_key=null,e.errorType="",e.filterimg="img/icons/filter_grey.png",e.sortimg="img/icons/sort_notapplied.png",e.display="loader",e.Popuparray=[],e.PopuparrayClicked=["img/icons/fresh_red.png","img/icons/popularity_red.png","img/icons/length-Red.png"],e.PopuparrayImages=["img/icons/fresh_grey.png","img/icons/popularity_grey.png","img/icons/length_grey.png"],e.refreshSwiper=!0,e.share=function(e){return o.shareNative(e,"category")},e.checkIfaddedToWatchList=function(t){var i;return e.getwatchlistDetails.length>0?(i=_.findIndex(e.getwatchlistDetails,{movie_id:t}),-1!==i?"selected":"notselected"):"notselected"},e.findIndexInWatchlist=function(t){var i;return i=_.findIndex(e.getwatchlistDetails,{movie_id:t})},e.addwatchlist=function(t){var i,r;return r={movie_id:t.movie_id,singleVideoarray:t},i=e.findIndexInWatchlist(t.movie_id),-1===i?(e.getwatchlistDetails.push(r),s.watchlistDetails("set",e.getwatchlistDetails)):(e.getwatchlistDetails.splice(i,1),s.watchlistDetails("set",e.getwatchlistDetails))},e.init=function(){return s.watchlistDetails("get").then(function(t){var i,a;return _.isNull(t)&&(t=[]),e.getwatchlistDetails=t,n.GlobalChild_array.length>0?(e.genreData=n.GlobalChild_array,e.genre=n.Global_array,e.sortData=n.Sort,e.language=n.Filter,a=l.innerWidth,i=l.innerHeight,e.used_height=161,e.hgt=i-e.used_height,e.display="result",void 0):r.GetSingleGenre(n.videoId).then(function(t){return function(t){return n.GlobalChild_array=t.movies,n.Global_array=t.genre,n.Filter=t.filters.languages,n.Sort=t.sort_keys,e.genreData=t.movies,e.genre=t.genre,e.sortData=t.sort_keys,e.language=t.filters.languages,e.display="result",a=l.innerWidth,i=l.innerHeight,e.used_height=161,e.hgt=i+3-e.used_height}}(this),function(t){return function(t){return e.display="error"}}(this))})},e.sortGenre=function(){return t.show({scope:e,templateUrl:"filterPopup/sortPopupgener.html",hideOnStateChange:!0})},e.langSelected=function(t){return e.lang=t},e.filterGenre=function(){return t.show({scope:e,templateUrl:"filterPopup/filterpopup.html",hideOnStateChange:!0})},e.getId=function(t){return e.sort_key=t,e.Popuparray=["img/icons/fresh_grey.png","img/icons/popularity_grey.png","img/icons/length_grey.png"],e.Popuparray[t]=e.PopuparrayClicked[t],e.txtcolor=["","",""],e.txtcolor[t]="color:#AF152F"},e.popup=function(){return _.isNull(e.sort_key)?e.Popuparray=e.PopuparrayImages:(e.Popuparray=["img/icons/fresh_grey.png","img/icons/popularity_grey.png","img/icons/length_grey.png"],e.Popuparray[e.sort_key]=e.PopuparrayClicked[e.sort_key],e.txtcolor=["","",""],e.txtcolor[e.sort_key]="color:#AF152F")},e.FiltersortApply=function(){var i;return _.isNull(e.lang)?e.filterimg="img/icons/filter_grey.png":e.filterimg="img/icons/filter_red.png",_.isNull(e.sort_key)?e.sortimg="img/icons/sort_notapplied.png":e.sortimg=e.PopuparrayClicked[e.sort_key],i=[n.Global_array.genre_id,e.sort_key,e.lang],t.hide(),e.display="loader",r.ApplyFilter(i).then(function(i){return function(i){return n.GlobalChild_array=i.movies,n.Global_array=i.genre,n.Filter=i.filters.languages,n.Sort=i.sort_keys,n.GlobalChild_array.length>0?(e.display="result",e.genreData=i.movies,e.genre=i.genre,e.sortData=i.sort_keys,e.language=i.filters.languages,t.hide(),e.refreshSwiper=!1,c(function(){return e.refreshSwiper=!0,e.display="result"},100)):(e.errorType="no_Search_result",e.display="error")}}(this),function(t){return function(t){return e.errorType="",e.display="error"}}(this)),t.hide()},e.hide=function(){return t.hide(),{hideOnStateChange:!1}},e.reset=function(){var i;return e.sortimg="img/icons/sort_notapplied.png",e.filterimg="img/icons/filter_grey.png",e.sort_key=null,e.lang="",i=[n.Global_array.genre_id,e.sort_key,e.lang],t.hide(),e.display="loader",r.ApplyFilter(i).then(function(i){return function(i){return n.GlobalChild_array=i.movies,n.Global_array=i.genre,n.Filter=i.filters.languages,n.Sort=i.sort_keys,e.genreData=i.movies,e.genre=i.genre,e.sortData=i.sort_keys,e.language=i.filters.languages,t.hide(),e.display="result"}}(this),function(i){return function(i){return e.errorType="",e.display="error",t.hide()}}(this))},e.hideNoReset=function(){return e.sortimg="img/icons/sort_notapplied.png",e.filterimg="img/icons/filter_grey.png",e.sort_key=null,e.lang="",t.hide(),{hideOnStateChange:!1}},e.singlePlayService=function(e){return n.singleVideoarray.movie_id=e.movie_id,n.singleVideoarray.singleVideoarray=e,i.navigate("init")},e.back=function(){var e;return n.GlobalChild_array=[],n.Global_array=[],n.Filter=[],n.Sort=[],e=-1,i.goBack(e)},e.view={onTapToRetry:function(){return e.init(),e.display="loader"}}}]),shortFilmWindow.controller("playlistCtrl",["$scope","App","PulltorefreshAPI","DetailsAPI","$ionicLoading",function(e,t,i,r,n){return e.doRefresh=function(){return i.pullrequest().then(function(t){return function(t){return i.saveData({premiere:t.defaults.content.popular.weekly_premiere,new_addition:t.defaults.content.popular.new_additions,noteworthy:t.defaults.content.popular.noteworthy,awesome_playlist:t.defaults.content.popular.awesome_playlist,genre:t.defaults.content.genre,playlist:t.defaults.content.playlists}),e.playlist=r.playlist_array,e.$broadcast("scroll.refreshComplete"),n.hide()}}(this),function(t){return function(t){return e.$broadcast("scroll.refreshComplete"),n.hide()}}(this))},e.test=function(){return e.playlist=r.playlist_array},e.singleplaylist=function(e){return r.videoId=e,t.navigate("singlePlaylist")}}]),shortFilmWindow.factory("PlaylistAPI",["$q","App","$http",function(e,t,i){var r;return r={},r.GetSingleplaylist=function(t){
var r;return r=e.defer(),i.get(URL+("/wp-json/get_playlist_videos/?playlist_id="+t)).then(function(e){var t;return t=angular.fromJson(e.data),r.resolve(t)},function(e){return r.reject(e)}),r.promise},r}]),shortFilmWindow.controller("singlePlaylist",["$scope","$rootScope","$ionicScrollDelegate","$ionicLoading","App","PlaylistAPI","DetailsAPI","$ionicHistory","share","$window","$timeout","Storage",function(e,t,i,r,n,a,o,l,s,c,u,d){return e.display="loader",e.getwatchlistDetails=[],t.slideHeader=!1,t.slideHeaderPrevious=0,e.checkIfaddedToWatchList=function(t){var i;return e.getwatchlistDetails.length>0?(i=_.findIndex(e.getwatchlistDetails,{movie_id:t}),-1!==i?"selected":"notselected"):"notselected"},e.findIndexInWatchlist=function(t){var i;return i=_.findIndex(e.getwatchlistDetails,{movie_id:t})},e.addwatchlist=function(t){var i,r;return console.log(t),r={movie_id:t.movie_id,singleVideoarray:t},i=e.findIndexInWatchlist(t.movie_id),-1===i?(e.getwatchlistDetails.push(r),d.watchlistDetails("set",e.getwatchlistDetails)):(e.getwatchlistDetails.splice(i,1),d.watchlistDetails("set",e.getwatchlistDetails))},e.share=function(e){return s.shareNative(e,"playlist")},e.init=function(){return d.watchlistDetails("get").then(function(t){var i,n;return _.isNull(t)&&(t=[]),e.getwatchlistDetails=t,o.GlobalChild_array.length>0?(e.playlistData=o.GlobalChild_array,e.playlist=o.Global_array,e.display="result",n=c.innerWidth,i=c.innerHeight,e.used_height=164,e.hgt=i-e.used_height,e.headerwidth=n-100-27):(e.display="loader",a.GetSingleplaylist(o.videoId).then(function(t){return function(t){return o.Global_array=t.playlist,o.GlobalChild_array=t.movies,e.playlistData=t.movies,e.playlist=t.playlist,e.display="result",n=c.innerWidth,i=c.innerHeight,e.used_height=164,e.hgt=i-e.used_height,e.headerwidth=n-100-27,r.hide()}}(this),function(t){return function(t){return e.display="error",r.hide()}}(this)))})},e.singlePlayService=function(e){return o.singleVideoarray.movie_id=e.movie_id,o.singleVideoarray.singleVideoarray=e,n.navigate("init")},e.back=function(){var e;return o.Global_array=[],o.GlobalChild_array=[],e=-1,n.goBack(e)},e.view={onTapToRetry:function(){return e.init()}}}]),shortFilmWindow.controller("popularCtrl",["$scope","$rootScope","App","PulltorefreshAPI","DetailsAPI","$ionicLoading","$window","InitialiseService","Storage","$timeout",function(e,t,i,r,n,a,o,l,s,c){var u,d,h,p;return e.getwatchlistDetails=[],e.currentCard={},e.refreshSwiper=!0,t.$on("watchListUpdate",function(t,i){return e.getwatchlistDetails=i,e.checkIfaddedlist()}),t.$on("refreshContent",function(t,i){return e.doRefresh()}),e.detectSlideChange=function(t){return e.currentCard=e.allContentArray[t.activeIndex]},e.singleplaylist=function(e){return n.videoId=e,i.navigate("singlePlaylist")},e.checkIfaddedlist=function(){return _.each(e.allContentArray,function(t,i){return e.allContentArray[i].addedToWatchList=0}),e.getwatchlistDetails.length>0?_.each(e.getwatchlistDetails,function(t){var i;return i=_.findIndex(e.allContentArray,{movieId:t.movie_id}),-1!==i?e.allContentArray[i].addedToWatchList=1:void 0}):void 0},d=function(t){var i;return i=_.findIndex(e.allContentArray,{movieId:t})},u=function(t){var i;return i=_.findIndex(e.getwatchlistDetails,{movie_id:t})},e.updateFlagInallContentArray=function(t,i){var r;return r=d(t),e.allContentArray[r].addedToWatchList=i},e.addwatchlist=function(t){var i,r;return r={movie_id:t.movieId,singleVideoarray:t.content},i=u(t.movieId),-1===i?(e.updateFlagInallContentArray(t.movieId,1),e.getwatchlistDetails.push(r),s.watchlistDetails("set",e.getwatchlistDetails)):(e.updateFlagInallContentArray(t.movieId,0),e.getwatchlistDetails.splice(i,1),s.watchlistDetails("set",e.getwatchlistDetails))},e.doRefresh=function(){return i.isOnline()?(r.pullrequest().then(function(t){return function(t){return e.checkNetwork=!0,r.saveData({premiere:t.defaults.content.popular.weekly_premiere,new_addition:t.defaults.content.popular.new_additions,noteworthy:t.defaults.content.popular.noteworthy,awesome_playlist:t.defaults.content.popular.awesome_playlist,genre:t.defaults.content.genre,playlist:t.defaults.content.playlists}),e.premeiere=n.array,e.addition=n.array_addition,e.noteworthy=n.array_noteworthy,e.awplalist=n.array_awplalist,e.videoId=n.array.videoId,e.$broadcast("scroll.refreshComplete"),a.hide(),e.initApp()}}(this),function(t){return function(t){return e.$broadcast("scroll.refreshComplete")}}(this)),a.hide()):e.checkNetwork=!1},e.singlePlayService=function(e){return n.singleVideoarray.movie_id=e.movie_id,n.singleVideoarray.singleVideoarray=e,i.navigate("init")},e.initApp=function(){var t,r;return r=o.innerWidth,t=o.innerHeight,e.used_height=159,e.hgt=t+3-e.used_height,i.isOnline()?(h(),e.display="result"):(e.checkNetwork=!1,e.display="nonetwork",broadcastOnComplete())},h=function(){var t,i,r,a;return a=[],t=[],r=[],i=[],e.allContentArray=[],a.push({order:1,cardtitle:"Weekly Premiere",p:"Carefully handpicked, just for you.",iconimg:"weekly_premiere",content:n.array,addedToWatchList:0,movieId:n.array.movie_id}),t=_.map(n.array_addition,function(e,t,i){return{order:2,cardtitle:"New Additions",p:"Just starting out on their big journey!",iconimg:"new_additions",content:e,addedToWatchList:0,movieId:e.movie_id}}),r=_.map(n.array_noteworthy,function(e,t,i){return{order:3,cardtitle:"Noteworthy",p:"Completely out of the ordinary",iconimg:"noteworthy",content:e,addedToWatchList:0,movieId:e.movie_id}}),i.push({order:4,cardtitle:"Awesome Playlist",p:"Sit back and relax with some popcorn!",iconimg:"awesome_playlists",content:n.array_awplalist,addedToWatchList:0,movieId:""}),e.refreshSwiper=!1,c(function(){return e.refreshSwiper=!0,e.allContentArray=_.union(a,t,r,i),e.currentCard=e.allContentArray[0],p()},100)},p=function(){return s.watchlistDetails("get").then(function(t){return _.isNull(t)&&(t=[]),e.getwatchlistDetails=t,e.checkIfaddedlist()})}}]);