var URL,device_height,device_width;URL="http://shortfilm.staging.wpengine.com",device_width="",device_height="";var shortFilmWindow;shortFilmWindow=angular.module("SFWApp",["ionic","ngCordova","ngAnimate","ngSanitize","ion-sticky","ionicLazyLoad","vimeoEmbed","ionic.ion.imageCacheFactory","templates"]),shortFilmWindow.value("ParseConfiguration",{applicationId:"DMhdPZNQAUzklzpPb9Lhp8qHZFjcVU9klP0jxLsO",javascriptKey:"TTrki92xoLK7s4POTGeFk4i2Ynm8tPbPl7QrKl7K",clientKey:"gsGvDg9ZkEqzwqYZiFsTZZsMQxdCQ9EcNbrTWAY5",masterKey:"LALmaz73J44ndeC2n7vuuySMVLGHUSTEQADmJPKN",installationId:""}),shortFilmWindow.run(["$ionicPlatform","$state","$rootScope","App","$timeout","$window","$cordovaNetwork","$cordovaToast","DetailsAPI","ParseConfiguration",function(t,e,i,r,n,a,o,l,s,c){return t.ready(function(){var t,e;return i.App=r,e=a.innerWidth,t=a.innerHeight,r.navigate("appInitialize")}),i.$on("$stateChangeSuccess",function(t,e,n,a,o){return"notifications"===e.name?i.pageHeader="Notifications":i.pageHeader="Shortfilm Window",""===a.name&&"init"===e.name?r.fromNotification=1:r.previousState=a.name,r.currentState=e.name}),i.$on("$stateChangeStart",function(t,e,i,r,n){return""!==r.name&&"appInitialize"===e.name?(console.log("prevent"),t.preventDefault()):void 0})}]),shortFilmWindow.config(["$compileProvider","$ionicConfigProvider",function(t,e){return e.scrolling.jsScrolling(!1),t.debugInfoEnabled(!1)}]);var htmlEnDeCode;htmlEnDeCode=function(){var t,e,i,r,n,a,o,l;return i=void 0,n=void 0,e=void 0,r=void 0,l=function(){e={},r={},t({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},t=function(t){var a,o,l,s,c;a=[],l=[],s=void 0,o=void 0;for(c in t)o=t[c],r[c]=o,e[o]=c,a.push(o),l.push(c);i=new RegExp("("+a.join("|")+")","g"),n=new RegExp("("+l.join("|")+"|&#[0-9]{1,5};)","g")},o=function(t){var r;return r=function(t,i){return e[i]},t?String(t).replace(i,r):t},a=function(t){var e;return e=function(t,e){return e in r?r[e]:String.fromCharCode(parseInt(e.substr(2),10))},t?String(t).replace(n,e):t},l(),{htmlEncode:o,htmlDecode:a}}(),shortFilmWindow.factory("App",["$state","$ionicHistory","$window","$cordovaNetwork",function(t,e,i,r){var n;return n=void 0,n={start:!0,unreadNotifications:0,menuEnabled:{left:!1,right:!1},previousState:"",currentState:"",fromNotification:0,notificationPayload:[],navigate:function(i,r,n){var a,o;return a=void 0,o=void 0,null===r&&(r={}),null===n&&(n={}),_.isEmpty(n)||(a=_.has(n,"animate")?n.animate:!1,o=_.has(n,"back")?n.back:!1,e.nextViewOptions({disableAnimate:!a,disableBack:!o})),t.go(i,r)},getbackView:function(){return console.log(e.backView())},goBack:function(i){return this.fromNotification?(this.fromNotification=0,t.go("popular")):e.goBack(i)},isAndroid:function(){return ionic.Platform.isAndroid()},isIOS:function(){return ionic.Platform.isIOS()},isWebView:function(){return ionic.Platform.isWebView()},isOnline:function(){return this.isWebView()?r.isOnline():navigator.onLine},deviceUUID:function(){return this.isWebView()?device.uuid:"DUMMYUUID"},hideKeyboardAccessoryBar:function(){return i.cordova&&i.cordova.plugins.Keyboard?$cordovaKeyboard.hideAccessoryBar(!0):void 0}}}]),shortFilmWindow.directive("ajError",[function(){return{restrict:"E",replace:!0,templateUrl:"Global/error.html",scope:{tapToRetry:"&",errorType:"="},link:function(t,e,i){var r,n,a;switch(t.errorType){case"offline":n="No internet availability",a="Error",r="Retry";break;case"server_error":n="Could not connect to server";break;case"no_Search_result":n="No results found",a="Result",r="Close";break;default:n="Something Went Wrong",a="Error",r="Retry"}return t.errorMsg=n,t.errorTitle=a,t.button=r,t.onTryAgain=function(){return t.tapToRetry()}}}}]),shortFilmWindow.factory("share",["$q","App","$http",function(t,e,i){var r;return r={},r.shareNative=function(t,e){var i;if(null==e&&(e=""),console.log("Sharing video"),window.plugins&&window.plugins.socialsharing){switch(e){case"":i=URL+"/"+t;break;default:i=URL+"/"+e+"/"+t}return window.plugins.socialsharing.share(null,"shortFilm Window",null,i,function(){return console.log("Success")},function(t){return console.log("Share fail "+t)})}return console.log("Share plugin not available")},r}]),shortFilmWindow.controller("playerCtrl",["$scope","$sce","DetailsAPI","$ionicHistory","App","$timeout",function(t,e,i,r,n,a){var o,l,s;return t.videoDetails=i.singleVideoarray,t.videourl=t.videoDetails.singleVideoarray.videourl,t.switchHeaderBar=!0,a(function(){return t.switchHeaderBar=!t.switchHeaderBar},5e3),t.toggleHeader=function(){return t.switchHeaderBar=!t.switchHeaderBar,a(function(){return t.switchHeaderBar=!t.switchHeaderBar,t.$apply()},5e3)},t.view={back:function(){var t;return t=-1,n.goBack(t)},vType:t.videoDetails.singleVideoarray.type,vimomeo:!0,init:function(){var i,r;return"vimeo"===this.vType?(i=t.videoDetails.singleVideoarray.embedurl,this.vimomeo=!0,t.player1=e.trustAsResourceUrl(i)):(this.vimomeo=!1,r=new YT.Player("player2",{height:"100%",width:"100%",videoId:t.videourl,playerVars:{autoplay:1,rel:0,wmode:"transparent",modestbranding:1},events:{onReady:o,onStateChange:l}}))}},o=function(t){return t.target.playVideo()},l=function(t){var e;return t.data!==YT.PlayerState.PLAYING||e?void 0:(setTimeout(s,6e3),e=!0)},s=function(){return player.stopVideo()}}]),shortFilmWindow.controller("watchlistCtrl",["$scope","Storage","DetailsAPI","App","$window","$ionicScrollDelegate","$timeout",function(t,e,i,r,n,a,o){return t.watchlistDetails=[],t.display="loader",t.watchFlag="0",t.refreshSwiper=!0,t.addvideoDetails=[],t.init=function(){return t.getData()},t.getData=function(){return e.watchlistDetails("get").then(function(e){var i,r;return t.watchlistDetails=e,_.isNull(t.watchlistDetails)?(t.display="no_result",t.$apply()):t.watchlistDetails.length>0?(r=n.innerWidth,i=n.innerHeight,t.used_height=115,t.hgt=i-t.used_height,t.display="result",t.$apply()):(t.display="no_result",t.$apply())})},t.updatewatchlist=function(e){return t.CheckWatchlist(e),a.resize()},t.singlePlayService=function(t){return i.singleVideoarray.movie_id=t.movie_id,i.singleVideoarray.singleVideoarray=t,r.navigate("init")},t.CheckWatchlist=function(i){var r;return r=_.findLastIndex(t.watchlistDetails,{movie_id:i}),t.watchlistDetails.splice(r,1),e.watchlistDetails("set",t.watchlistDetails),_.isNull(t.watchlistDetails)||0===t.watchlistDetails.length?t.display="no_result":(t.refreshSwiper=!1,o(function(){var e,i;return t.refreshSwiper=!0,i=n.innerWidth,e=n.innerHeight,t.used_height=115,t.hgt=e-t.used_height},100))}}]),shortFilmWindow.factory("DetailsAPI",["$q","App","$http","$ImageCacheFactory",function(t,e,i,r){var n;return n={},n.videoId="",n.array_addition=[],n.array_noteworthy=[],n.array_awplaylist=[],n.genre_array=[],n.playlist_array=[],n.Global_array=[],n.GlobalChild_array=[],n.Filter=[],n.Sort=[],n.array=[],n.singleVideoarray=[],n.imagArray=[],n.initialize=0,n.GetVideoDetails=function(){var e;return e=t.defer(),i.get(URL+"/wp-json/get_defaults").then(function(t){return e.resolve(t.data)},function(t){return e.reject(t)}),e.promise},n.GetSingleVideo=function(e){var r;return r=t.defer(),i.get(URL+("/wp-json/get_video?id="+e)).then(function(t){return r.resolve(t.data)},function(t){return r.reject(t)}),r.promise},n.searchResult=function(e){var r;return r=t.defer(),i.get(URL+("/wp-json/search?str="+e)).then(function(t){return r.resolve(t.data)},function(t){return r.reject(t)}),r.promise},n.setData=function(t){return null==t&&(t={}),n.array=t.premiere,n.array_addition=t.new_addition,n.array_noteworthy=t.noteworthy,n.array_awplalist=t.awesome_playlist,n.genre_array=t.genre,n.playlist_array=t.playlist,n.initialize=1},n}]),shortFilmWindow.factory("PulltorefreshAPI",["$q","App","$http","DetailsAPI",function(t,e,i,r){var n;return n={},n.pullrequest=function(){var e;return e=t.defer(),i.get(URL+"/wp-json/get_defaults").then(function(t){return e.resolve(t.data)},function(t){return e.reject(t)}),e.promise},n.saveData=function(t){return null==t&&(t={}),r.array=t.premiere,r.array_addition=t.new_addition,r.array_noteworthy=t.noteworthy,r.array_awplalist=t.awesome_playlist,r.genre_array=t.genre,r.playlist_array=t.playlist},n}]),shortFilmWindow.directive("isLoaded",function(){return{scope:!1,restrict:"A",link:function(t,e,i){return t.$last?t.$emit("content-changed"):void 0}}}),shortFilmWindow.directive("scrollWatch",function(t){return function(e,i,r){var n,a;return n=0,a=150,i.bind("scroll",function(e){return e.detail.scrollTop-n>a?t.slideHeader=!0:t.slideHeader=!1,t.slideHeaderPrevious>=e.detail.scrollTop-n&&(t.slideHeader=!1),t.slideHeaderPrevious=e.detail.scrollTop-n,t.$apply()})}}),shortFilmWindow.directive("swiper",function(){return{link:function(t,e,i){return t.$on("content-changed",function(){return new Swiper(e,{direction:"vertical",pagination:".swiper-pagination",paginationClickable:!0,onSlideChangeEnd:function(e){return t.currSwiper=e,t.$apply(i.detectSwiperSlide)},onSlideChangeStart:function(e){return t.currSwiper=e,t.$apply(i.detectSwiperSlide)}})})}}}),shortFilmWindow.filter("encodeDecodeFilter",function(){return function(t){return htmlEnDeCode.htmlDecode(t)}}),shortFilmWindow.controller("InitCtrl",["$scope","$sce","App","DetailsAPI","$ionicLoading","$ionicHistory","share","Storage","InitialiseService","ParseNotificationService","$rootScope",function(t,e,i,r,n,a,o,l,s,c,u){var d,h,p;return t.Videodetails=[],t.addvideoDetails=[],t.getwatchlistDetails=[],t.watchFlag="0",t.intFlag="0",t.watchlistimg="",t.showLoaderOrSynopsis=!0,t.showVideo=!1,t.share=function(t){return o.shareNative(t)},t.addwatchlist=function(){return t.CheckWatchlist()},t.checkIfaddedlist=function(){return l.watchlistDetails("get").then(function(e){var i;if(t.getwatchlistDetails=e,_.isNull(t.getwatchlistDetails)||0===t.getwatchlistDetails.length)return t.watchlistimg="icon-favorite",t.$apply();for(i=0;i<t.getwatchlistDetails.length;)t.getwatchlistDetails[i].movie_id===t.Videodetails.movie_id&&(t.intFlag="1"),i++;return"1"===t.intFlag?(t.watchlistimg="icon-unfavorite",t.$apply()):(t.watchlistimg="icon-favorite",t.$apply())})},t.CheckWatchlist=function(){return l.watchlistDetails("get").then(function(e){var i,n;return t.getwatchlistDetails=e,_.isNull(t.getwatchlistDetails)||0===t.getwatchlistDetails.length?(t.addvideoDetails.push(r.singleVideoarray),l.watchlistDetails("set",t.addvideoDetails),t.watchlistimg="icon-unfavorite",t.$apply()):(i=_.findLastIndex(t.getwatchlistDetails,{movie_id:r.singleVideoarray.movie_id}),-1!==i?(t.getwatchlistDetails.splice(i,1),n=t.getwatchlistDetails,t.addvideoDetails=n,l.watchlistDetails("set",t.addvideoDetails),t.watchlistimg="icon-favorite",t.$apply()):(t.getwatchlistDetails.push(r.singleVideoarray),n=t.getwatchlistDetails,t.addvideoDetails=n,l.watchlistDetails("set",t.addvideoDetails),t.watchlistimg="icon-unfavorite",t.$apply()))})},t.init=function(e){return null==e&&(e=""),angular.isUndefined(r.singleVideoarray.movie_id)?r.GetSingleVideo(e).then(function(e){return function(e){var i;return t.display="result",i={movie_id:e.movie_id,singleVideoarray:e},r.singleVideoarray=i,t.Videodetails=e,t.Videodetails,t.showLoaderOrSynopsis=!1,document.getElementById("synopsis").outerHTML=t.Videodetails.content,t.initPlayer()}}(this),function(t){return function(t){return console.log("error")}}(this)):(t.display="result",t.Videodetails=r.singleVideoarray.singleVideoarray,t.checkIfaddedlist(),r.GetSingleVideo(r.singleVideoarray.movie_id).then(function(e){return t.showLoaderOrSynopsis=!1,document.getElementById("synopsis").outerHTML=e.content,t.initPlayer()},function(t){return function(t){return console.log("error")}}(this)))},t.initPlayer=function(){var i,n,a;return t.vType=r.singleVideoarray.singleVideoarray.type,t.videourl=r.singleVideoarray.singleVideoarray.videourl,"vimeo"===t.vType?(a=document.createElement("a"),a.href=r.singleVideoarray.singleVideoarray.embedurl,i=a.protocol+"//"+a.hostname+a.pathname,t.player1=e.trustAsResourceUrl(i)):n=new YT.Player("player2",{height:"100%",width:"100%",videoId:t.videourl,playerVars:{autoplay:0,rel:0,wmode:"transparent",modestbranding:1},events:{onReady:d,onStateChange:h}})},d=function(t){return t.target.playVideo()},h=function(t){var e;return t.data!==YT.PlayerState.PLAYING||e?void 0:(setTimeout(p,6e3),e=!0)},p=function(){return player.stopVideo()},t.initializeApp=function(){return t.display="loader",c.updateNotificationStatus(i.notificationPayload.payload.notificationId).then(function(e){return t.init(r.videoId)})["catch"](function(e){return t.init(r.videoId)})},t.view={onTapToRetry:function(){return t.init()},back:function(){var t;return r.singleVideoarray=[],t=-1,i.goBack(t)},playVideo:function(){return t.showVideo=!0}},i.fromNotification?t.initializeApp():t.init(),t.showSynopsisDiv=!1}]),shortFilmWindow.controller("appInitializeCtrl",["$scope","App","DetailsAPI","InitialiseService","ParseConfiguration","$rootScope",function(t,e,i,r,n,a){return t.initApp=function(){var i,o;return Parse.initialize(n.applicationId,n.javascriptKey,n.masterKey),e.isWebView()&&(ParsePushPlugin.getInstallationObjectId(function(t){return n.installationId=t},function(t){return n.installationId=0}),window.ParsePushPlugin.on("openPN",function(t){return a.$broadcast("openNotification",{payload:t})}),window.ParsePushPlugin.on("receivePN",function(t){return a.$broadcast("receiveNotification",{payload:t})})),o=document.createElement("script"),o.src="https://www.youtube.com/iframe_api",i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(o,i),t.display="loader",t.errorType="offline",r.initialize().then(function(i){return e.isOnline()?e.navigate("popular"):t.display="error"},function(e){return t.display="error"})},t.initApp()}]),shortFilmWindow.controller("navigateCtrl",[function(){}]).config(["$stateProvider","$urlRouterProvider",function(t,e){return t.state("appInitialize",{url:"/appInitialize","abstract":!1,controller:"appInitializeCtrl",templateUrl:"landingVideo/appInitialize.html"}).state("home",{url:"/sidebar","abstract":!0,controller:"sidebarCtrl",templateUrl:"home/home.html"}).state("tabhome",{url:"/homeTab",parent:"home","abstract":!0,views:{homeview:{templateUrl:"home/homeTab.html"}}}).state("popular",{url:"/popular",parent:"tabhome",views:{popularContent:{templateUrl:"tabs/popular/popular.html",controller:"popularCtrl"}}}).state("genre",{cache:!0,url:"/genre",parent:"tabhome",views:{genreContent:{templateUrl:"tabs/genre/genre.html",controller:"genreCtrl",params:{data:null}}}}).state("playlist",{url:"/playlist",parent:"tabhome",views:{playlistContent:{templateUrl:"tabs/playlist/playlist.html",controller:"playlistCtrl"}}}).state("watchList",{url:"/watchList",cache:!1,parent:"home",views:{homeview:{templateUrl:"watchlist/myWatchlist.html",controller:"watchlistCtrl"}}}).state("notifications",{url:"/notifications",cache:!1,parent:"home",views:{homeview:{templateUrl:"notification/notifications.html",controller:"notificationsCtrl"}}}).state("init",{url:"/init",cache:!1,controller:"InitCtrl",templateUrl:"singlevideo/movieScreen.html"}).state("singlePlayer",{url:"/singlePlayer",cache:!1,controller:"playerCtrl",templateUrl:"singlevideo/singlePlayer.html"}).state("landingvideo",{url:"/landing",cache:!1,controller:"landingCtrl",templateUrl:"landingVideo/splash.html"}).state("navbar",{url:"/navbar","abstract":!1,templateUrl:"home/navBar.html"}).state("singleGenre",{url:"/singleGenre",cache:!1,controller:"singleGenre",templateUrl:"tabs/genre/singleGenre.html"}).state("singlePlaylist",{url:"/singlePlaylist",cache:!1,controller:"singlePlaylist",templateUrl:"tabs/playlist/singlePlaylist.html"})}]),shortFilmWindow.controller("notificationsCtrl",["$rootScope","$scope","App","PulltorefreshAPI","DetailsAPI","$ionicLoading","$stateParams","ParseNotificationService","Storage","$timeout","$window",function(t,e,i,r,n,a,o,l,s,c,u){return e.notificationArray=[],t.$on("receiveNotification",function(t,i){return e.getNotifications()}),e.view={onTapToRetry:function(){return e.getNotifications()}},e.getNotifications=function(){return t.$broadcast("refreshContent",{}),e.hgt=u.innerHeight-88,e.swiperhgt=e.hgt-31,i.isOnline()?(e.result="loader",s.watchlistDetails("get").then(function(t){return _.isNull(t)&&(t=[]),e.getwatchlistDetails=t,l.getNotificationsWithStatus().then(function(t){return 0===t.length?(e.result="no-new-notifications",e.initWatchlist):(e.refreshSwiper=!1,e.notificationArray=t,c(function(){return e.refreshSwiper=!0,e.result="display"},50))})["catch"](function(t){return e.result="error"})})):e.result="error"},e.clearNotifications=function(){return i.isOnline()?(e.notificationArray=[],e.result="no-new-notifications",t.unreadNotificationCount=0,l.deleteNotifications().then(function(t){return console.log(t)})["catch"](function(t){return e.result="error"})):e.result="error"},e.markNotificationAsRead=function(r){var n;return i.isOnline()?(n=_.findLastIndex(e.notificationArray,{notificationId:""+r}),e.notificationArray[n].status="read",t.unreadNotificationCount&&t.unreadNotificationCount--,l.updateNotificationStatus(r).then(function(t){return console.log(t)})["catch"](function(t){return e.result="error"})):e.result="error"},e.checkIfaddedToWatchList=function(t){var i;return e.getwatchlistDetails.length>0?(i=_.findIndex(e.getwatchlistDetails,{movie_id:t}),-1!==i?"selected":"notselected"):"notselected"},e.findIndexInWatchlist=function(t){var i;return i=_.findIndex(e.getwatchlistDetails,{movie_id:t})},e.addwatchlist=function(t,i){var r,n;return e.markNotificationAsRead(i),n={movie_id:t.movie_id,singleVideoarray:t},r=e.findIndexInWatchlist(t.movie_id),-1===r?(e.getwatchlistDetails.push(n),s.watchlistDetails("set",e.getwatchlistDetails)):(e.getwatchlistDetails.splice(r,1),s.watchlistDetails("set",e.getwatchlistDetails))},e.singlePlayService=function(t,r){return e.markNotificationAsRead(r),n.singleVideoarray.movie_id=t.movie_id,n.singleVideoarray.singleVideoarray=t,i.navigate("init")}}]),shortFilmWindow.service("InitialiseService",["$q","DetailsAPI","App","$rootScope","$ImageCacheFactory",function(t,e,i,r,n){return{initialize:function(){var a;return a=void 0,a=void 0,a=t.defer(),i.isOnline()?e.GetVideoDetails().then(function(t){return r.vData=t}).then(function(t){var i;return i=[],_.each(t.defaults.content,function(t,e){switch(e){case"genre":return _.each(t,function(t){return i.push(t.genre_image_url)});case"playlists":return _.each(t,function(t){return i.push(t.playlist_image_url)});case"popular":return _.each(t,function(t,e){switch(e){case"awesome_playlist":return _.each(t.awesome_playlist,function(t){return i.push(t.playlist_image_url)});case"new_additions":return _.each(t.new_additions,function(t){return i.push(t.image)});case"weekly_premiere":return _.each(t.weekly_premiere,function(t){return i.push(t.image)})}})}}),n.Cache([i]),e.setData({premiere:r.vData.defaults.content.popular.weekly_premiere,new_addition:r.vData.defaults.content.popular.new_additions,noteworthy:r.vData.defaults.content.popular.noteworthy,awesome_playlist:r.vData.defaults.content.popular.awesome_playlist,genre:r.vData.defaults.content.genre,playlist:r.vData.defaults.content.playlists}),a.resolve(r.vData)}):a.reject(),a.promise}}}]),shortFilmWindow.service("ParseNotificationService",["$q","$window","ParseConfiguration","$rootScope",function(t,e,i,r){return{getNotificationsWithStatus:function(){var e,r;return e=t.defer(),r=i.installationId,Parse.Cloud.run("listAllNotificationsForUser",{installation_id:r},{success:function(t){var i;i=[],_.each(t,function(t){var e,r;return e={},t.attributes.notificationId.attributes.movieDetails&&(e=angular.fromJson(decodeURIComponent(t.attributes.notificationId.attributes.movieDetails))),r={fromnow:moment(t.attributes.createdAt).fromNow(),createdAt:t.attributes.createdAt,notificationId:t.attributes.notificationId.id,installationId:t.attributes.installationId.id,alert:t.attributes.notificationId.attributes.alert,movieDetails:e,status:t.attributes.status},i.push(r)}),e.resolve(i)},error:function(t){e.reject(t)}}),e.promise},getUnreadNotificationsCount:function(){var e,r;return e=t.defer(),r=i.installationId,Parse.Cloud.run("countUnreadNotifications",{installation_id:r},{success:function(t){e.resolve(t)},error:function(t){e.reject("0")}}),e.promise},updateNotificationStatus:function(e){var r,n;return r=t.defer(),n=i.installationId,Parse.Cloud.run("updateNotificationStatusAsRead",{installation_id:n,notification_id:e},{success:function(t){r.resolve(t)},error:function(t){r.reject(t)}}),r.promise},deleteNotifications:function(){var e,r;return e=t.defer(),r=i.installationId,Parse.Cloud.run("deleteAllNotification",{installation_id:r},{success:function(t){e.resolve(t)},error:function(t){e.reject(t)}}),e.promise}}}]),shortFilmWindow.controller("sidebarCtrl",function(t,e,i,r,n,a,o,l,s,c,u){t.showsearchbar=!1,t.display="tabview",t.errorType="",t.SearchResult=[],t.classname="",t.watchListCount="0",t.afterSearch=!1,e.unreadNotificationCount=0,t.getwatchlistDetails=[],t.checkIfaddedToWatchList=function(e){var i;return t.getwatchlistDetails.length>0?(i=_.findIndex(t.getwatchlistDetails,{movie_id:e}),-1!==i?"selected":"notselected"):"notselected"},t.findIndexInWatchlist=function(e){var i;return i=_.findIndex(t.getwatchlistDetails,{movie_id:e})},t.addwatchlist=function(e){var i,r;return r={movie_id:e.movie_id,singleVideoarray:e},i=t.findIndexInWatchlist(e.movie_id),-1===i?(t.getwatchlistDetails.push(r),c.watchlistDetails("set",t.getwatchlistDetails)):(t.getwatchlistDetails.splice(i,1),c.watchlistDetails("set",t.getwatchlistDetails))},e.$on("openNotification",function(t,i){return a.fromNotification=1,o.videoId=131,e.unreadNotificationCount&&e.unreadNotificationCount--,a.notificationPayload=i,a.navigate("init")}),e.$on("receiveNotification",function(t,i){return e.unreadNotificationCount++}),t.device_height=s.innerHeight,t.hgt=parseInt(t.device_height)-parseInt(45),t.getwatchlistcount=function(){return c.watchlistDetails("get").then(function(e){return _.isNull(e)&&(e=[]),t.watchlistDetails=e,0===t.watchlistDetails.length?(t.watchListCount="0",t.$apply()):t.watchlistDetails.length>0?(t.watchListCount=t.watchlistDetails.length,t.$apply()):(t.watchListCount="0",t.$apply())})},e.getnotificationcount=function(){return u.getUnreadNotificationsCount().then(function(t){return e.unreadNotificationCount=t})},t.singlePlayService=function(t){return o.singleVideoarray.movie_id=t.movie_id,o.singleVideoarray.singleVideoarray=t,a.navigate("init")},t.searchMovie=function(){return c.watchlistDetails("get").then(function(e){var i,r;return _.isNull(e)&&(e=[]),t.watchlistDetails=e,t.afterSearch=!1,i=document.getElementById("autocomplete"),r=i.value,t.display="loader",o.searchResult(r).then(function(e){return function(e){var i,r;return t.afterSearch=!0,t.SearchResult=e,r=s.innerWidth,i=s.innerHeight,t.used_height=32,t.hgt=i-t.used_height,0===t.SearchResult.length?(t.errorType="no_Search_result",t.display="error"):(t.classname="searchResult",t.display="searchresult")}}(this),function(e){return function(e){return t.errorType="offline",t.display="error"}}(this))})},t.onTapToRetry=function(){return""===t.errorType?t.searchMovie():t.hideSearch()},t.hideSearch=function(){return t.display="tabview"},t.SeacrchClicked=function(){return t.showsearchbar=!0},t.hide=function(){return l.hide(),{hideOnStateChange:!1}},t.displayWeb=function(t){return n.toggleLeft(),window.open(t,"_system"),!0},t.submit=function(){return a.navigate("onlineSubmit")},t.slideContent=function(){t.getwatchlistcount(),n.toggleLeft()},t.openModal=function(){t.taskModal.show()},t.closeModal=function(){t.taskModal.hide()},t.showPopup=function(){var e;t.data={},e=r.show({template:'<input class="padding" type="password" ng-modal="data-wifi">',title:"Enter Wi-Fi Password",subTitle:"Please use normal things",scope:t,buttons:[{text:"Cancel"},{text:"Save",cssClass:"test",type:"button-positive"}]})}}),shortFilmWindow.factory("Storage",["$rootScope",function(t){var e;return e={},e.watchlistDetails=function(e,i){switch(e){case"set":return localforage.setItem("watchlist_details",i,function(e,r){return t.$broadcast("watchListUpdate",i)});case"get":return localforage.getItem("watchlist_details");case"remove":return localforage.removeItem("watchlist_details")}},e}]),shortFilmWindow.controller("genreCtrl",["$rootScope","$scope","App","PulltorefreshAPI","DetailsAPI","$ionicLoading","$stateParams",function(t,e,i,r,n,a,o){return e.notificationPayload=o.data,e.doRefresh=function(){return r.pullrequest().then(function(t){return function(t){return r.saveData({premiere:t.defaults.content.popular.weekly_premiere,new_addition:t.defaults.content.popular.new_additions,noteworthy:t.defaults.content.popular.noteworthy,awesome_playlist:t.defaults.content.popular.awesome_playlist,genre:t.defaults.content.genre,playlist:t.defaults.content.playlists}),e.genreobj=n.genre_array,e.$broadcast("scroll.refreshComplete"),a.hide()}}(this),function(t){return function(t){return e.$broadcast("scroll.refreshComplete"),a.hide()}}(this))},e.init=function(){return e.genre=n.genre_array},e.singleGenre=function(t){return n.videoId=t,i.navigate("singleGenre")}}]),shortFilmWindow.factory("GenreAPI",["$q","App","$http",function(t,e,i){var r;return r={},r.GetSingleGenre=function(e){var r;return r=t.defer(),i.get(URL+("/wp-json/get_genre_videos?genre_id="+e)).then(function(t){return r.resolve(t.data)},function(t){return r.reject(t)}),r.promise},r.ApplyFilter=function(e){var r;return r=t.defer(),i.get(URL+("/wp-json/get_genre_videos?genre_id="+e[0]+"&sort_key="+e[1]+"&language_id="+e[2])).then(function(t){return r.resolve(t.data)},function(t){return r.reject(t)}),r.promise},r}]),shortFilmWindow.controller("singleGenre",["$scope","$ionicLoading","App","GenreAPI","DetailsAPI","$ionicHistory","share","$window","Storage","$timeout",function(t,e,i,r,n,a,o,l,s,c){return t.lang=null,t.sort_key=null,t.errorType="",t.filterimg="img/icons/filter_grey.png",t.sortimg="img/icons/sort_notapplied.png",t.display="loader",t.Popuparray=[],t.PopuparrayClicked=["img/icons/fresh_red.png","img/icons/popularity_red.png","img/icons/length-Red.png"],t.PopuparrayImages=["img/icons/fresh_grey.png","img/icons/popularity_grey.png","img/icons/length_grey.png"],t.refreshSwiper=!0,t.share=function(t){return o.shareNative(t,"category")},t.checkIfaddedToWatchList=function(e){var i;return t.getwatchlistDetails.length>0?(i=_.findIndex(t.getwatchlistDetails,{movie_id:e}),-1!==i?"selected":"notselected"):"notselected"},t.findIndexInWatchlist=function(e){var i;return i=_.findIndex(t.getwatchlistDetails,{movie_id:e})},t.addwatchlist=function(e){var i,r;return r={movie_id:e.movie_id,singleVideoarray:e},i=t.findIndexInWatchlist(e.movie_id),-1===i?(t.getwatchlistDetails.push(r),s.watchlistDetails("set",t.getwatchlistDetails)):(t.getwatchlistDetails.splice(i,1),s.watchlistDetails("set",t.getwatchlistDetails))},t.init=function(){return s.watchlistDetails("get").then(function(e){var i,a;return _.isNull(e)&&(e=[]),t.getwatchlistDetails=e,n.GlobalChild_array.length>0?(t.genreData=n.GlobalChild_array,t.genre=n.Global_array,t.sortData=n.Sort,t.language=n.Filter,a=l.innerWidth,i=l.innerHeight,t.used_height=161,t.hgt=i-t.used_height,t.display="result",void 0):r.GetSingleGenre(n.videoId).then(function(e){return function(e){return n.GlobalChild_array=e.movies,n.Global_array=e.genre,n.Filter=e.filters.languages,n.Sort=e.sort_keys,t.genreData=e.movies,t.genre=e.genre,t.sortData=e.sort_keys,t.language=e.filters.languages,t.display="result",a=l.innerWidth,i=l.innerHeight,t.used_height=161,t.hgt=i+3-t.used_height}}(this),function(e){return function(e){return t.display="error"}}(this))})},t.sortGenre=function(){return e.show({scope:t,templateUrl:"filterPopup/sortPopupgener.html",hideOnStateChange:!0})},t.langSelected=function(e){return t.lang=e},t.filterGenre=function(){return e.show({scope:t,templateUrl:"filterPopup/filterpopup.html",hideOnStateChange:!0})},t.getId=function(e){return t.sort_key=e,t.Popuparray=["img/icons/fresh_grey.png","img/icons/popularity_grey.png","img/icons/length_grey.png"],t.Popuparray[e]=t.PopuparrayClicked[e],t.txtcolor=["","",""],t.txtcolor[e]="color:#AF152F"},t.popup=function(){return _.isNull(t.sort_key)?t.Popuparray=t.PopuparrayImages:(t.Popuparray=["img/icons/fresh_grey.png","img/icons/popularity_grey.png","img/icons/length_grey.png"],t.Popuparray[t.sort_key]=t.PopuparrayClicked[t.sort_key],t.txtcolor=["","",""],t.txtcolor[t.sort_key]="color:#AF152F")},t.FiltersortApply=function(){var i;return _.isNull(t.lang)?t.filterimg="img/icons/filter_grey.png":t.filterimg="img/icons/filter_red.png",_.isNull(t.sort_key)?t.sortimg="img/icons/sort_notapplied.png":t.sortimg=t.PopuparrayClicked[t.sort_key],i=[n.Global_array.genre_id,t.sort_key,t.lang],e.hide(),t.display="loader",r.ApplyFilter(i).then(function(i){return function(i){return n.GlobalChild_array=i.movies,n.Global_array=i.genre,n.Filter=i.filters.languages,n.Sort=i.sort_keys,n.GlobalChild_array.length>0?(t.display="result",t.genreData=i.movies,t.genre=i.genre,t.sortData=i.sort_keys,t.language=i.filters.languages,e.hide(),t.refreshSwiper=!1,c(function(){return t.refreshSwiper=!0,t.display="result"},100)):(t.errorType="no_Search_result",t.display="error")}}(this),function(e){return function(e){return t.errorType="",t.display="error"}}(this)),e.hide()},t.hide=function(){return e.hide(),{hideOnStateChange:!1}},t.reset=function(){var i;return t.sortimg="img/icons/sort_notapplied.png",t.filterimg="img/icons/filter_grey.png",t.sort_key=null,t.lang="",i=[n.Global_array.genre_id,t.sort_key,t.lang],e.hide(),t.display="loader",r.ApplyFilter(i).then(function(i){return function(i){return n.GlobalChild_array=i.movies,n.Global_array=i.genre,n.Filter=i.filters.languages,n.Sort=i.sort_keys,t.genreData=i.movies,t.genre=i.genre,t.sortData=i.sort_keys,t.language=i.filters.languages,e.hide(),t.display="result"}}(this),function(i){return function(i){return t.errorType="",t.display="error",e.hide()}}(this))},t.hideNoReset=function(){return t.sortimg="img/icons/sort_notapplied.png",t.filterimg="img/icons/filter_grey.png",t.sort_key=null,t.lang="",e.hide(),{hideOnStateChange:!1}},t.singlePlayService=function(t){return n.singleVideoarray.movie_id=t.movie_id,n.singleVideoarray.singleVideoarray=t,i.navigate("init")},t.back=function(){var t;return n.GlobalChild_array=[],n.Global_array=[],n.Filter=[],n.Sort=[],t=-1,i.goBack(t)},t.view={onTapToRetry:function(){return t.init(),t.display="loader"}}}]),shortFilmWindow.controller("playlistCtrl",["$scope","App","PulltorefreshAPI","DetailsAPI","$ionicLoading",function(t,e,i,r,n){return t.doRefresh=function(){return i.pullrequest().then(function(e){return function(e){return i.saveData({premiere:e.defaults.content.popular.weekly_premiere,new_addition:e.defaults.content.popular.new_additions,noteworthy:e.defaults.content.popular.noteworthy,awesome_playlist:e.defaults.content.popular.awesome_playlist,genre:e.defaults.content.genre,playlist:e.defaults.content.playlists}),t.playlist=r.playlist_array,t.$broadcast("scroll.refreshComplete"),n.hide()}}(this),function(e){return function(e){return t.$broadcast("scroll.refreshComplete"),n.hide()}}(this))},t.test=function(){return t.playlist=r.playlist_array},t.singleplaylist=function(t){return r.videoId=t,e.navigate("singlePlaylist")}}]),shortFilmWindow.factory("PlaylistAPI",["$q","App","$http",function(t,e,i){var r;return r={},r.GetSingleplaylist=function(e){var r;return r=t.defer(),i.get(URL+("/wp-json/get_playlist_videos/?playlist_id="+e)).then(function(t){var e;return e=angular.fromJson(t.data),r.resolve(e)},function(t){return r.reject(t)}),r.promise},r}]),shortFilmWindow.controller("singlePlaylist",["$scope","$rootScope","$ionicScrollDelegate","$ionicLoading","App","PlaylistAPI","DetailsAPI","$ionicHistory","share","$window","$timeout","Storage",function(t,e,i,r,n,a,o,l,s,c,u,d){return t.display="loader",t.getwatchlistDetails=[],e.slideHeader=!1,e.slideHeaderPrevious=0,t.checkIfaddedToWatchList=function(e){var i;return t.getwatchlistDetails.length>0?(i=_.findIndex(t.getwatchlistDetails,{
movie_id:e}),-1!==i?"selected":"notselected"):"notselected"},t.findIndexInWatchlist=function(e){var i;return i=_.findIndex(t.getwatchlistDetails,{movie_id:e})},t.addwatchlist=function(e){var i,r;return console.log(e),r={movie_id:e.movie_id,singleVideoarray:e},i=t.findIndexInWatchlist(e.movie_id),-1===i?(t.getwatchlistDetails.push(r),d.watchlistDetails("set",t.getwatchlistDetails)):(t.getwatchlistDetails.splice(i,1),d.watchlistDetails("set",t.getwatchlistDetails))},t.share=function(t){return s.shareNative(t,"playlist")},t.init=function(){return d.watchlistDetails("get").then(function(e){var i,n;return _.isNull(e)&&(e=[]),t.getwatchlistDetails=e,o.GlobalChild_array.length>0?(t.playlistData=o.GlobalChild_array,t.playlist=o.Global_array,t.display="result",n=c.innerWidth,i=c.innerHeight,t.used_height=164,t.hgt=i-t.used_height,t.headerwidth=n-100-27):(t.display="loader",a.GetSingleplaylist(o.videoId).then(function(e){return function(e){return o.Global_array=e.playlist,o.GlobalChild_array=e.movies,t.playlistData=e.movies,t.playlist=e.playlist,t.display="result",n=c.innerWidth,i=c.innerHeight,t.used_height=164,t.hgt=i-t.used_height,t.headerwidth=n-100-27,r.hide()}}(this),function(e){return function(e){return t.display="error",r.hide()}}(this)))})},t.singlePlayService=function(t){return o.singleVideoarray.movie_id=t.movie_id,o.singleVideoarray.singleVideoarray=t,n.navigate("init")},t.back=function(){var t;return o.Global_array=[],o.GlobalChild_array=[],t=-1,n.goBack(t)},t.view={onTapToRetry:function(){return t.init()}}}]),shortFilmWindow.controller("popularCtrl",["$scope","$rootScope","App","PulltorefreshAPI","DetailsAPI","$ionicLoading","$window","InitialiseService","Storage","$timeout",function(t,e,i,r,n,a,o,l,s,c){var u,d,h,p;return t.getwatchlistDetails=[],t.currentCard={},t.refreshSwiper=!0,e.$on("watchListUpdate",function(e,i){return t.getwatchlistDetails=i,t.checkIfaddedlist()}),e.$on("refreshContent",function(e,i){return t.doRefresh()}),t.detectSlideChange=function(e){return t.currentCard=t.allContentArray[e.activeIndex]},t.singleplaylist=function(t){return n.videoId=t,i.navigate("singlePlaylist")},t.checkIfaddedlist=function(){return _.each(t.allContentArray,function(e,i){return t.allContentArray[i].addedToWatchList=0}),t.getwatchlistDetails.length>0?_.each(t.getwatchlistDetails,function(e){var i;return i=_.findIndex(t.allContentArray,{movieId:e.movie_id}),-1!==i?t.allContentArray[i].addedToWatchList=1:void 0}):void 0},d=function(e){var i;return i=_.findIndex(t.allContentArray,{movieId:e})},u=function(e){var i;return i=_.findIndex(t.getwatchlistDetails,{movie_id:e})},t.updateFlagInallContentArray=function(e,i){var r;return r=d(e),t.allContentArray[r].addedToWatchList=i},t.addwatchlist=function(e){var i,r;return r={movie_id:e.movieId,singleVideoarray:e.content},i=u(e.movieId),-1===i?(t.updateFlagInallContentArray(e.movieId,1),t.getwatchlistDetails.push(r),s.watchlistDetails("set",t.getwatchlistDetails)):(t.updateFlagInallContentArray(e.movieId,0),t.getwatchlistDetails.splice(i,1),s.watchlistDetails("set",t.getwatchlistDetails))},t.doRefresh=function(){return i.isOnline()?(r.pullrequest().then(function(e){return function(e){return t.checkNetwork=!0,r.saveData({premiere:e.defaults.content.popular.weekly_premiere,new_addition:e.defaults.content.popular.new_additions,noteworthy:e.defaults.content.popular.noteworthy,awesome_playlist:e.defaults.content.popular.awesome_playlist,genre:e.defaults.content.genre,playlist:e.defaults.content.playlists}),t.premeiere=n.array,t.addition=n.array_addition,t.noteworthy=n.array_noteworthy,t.awplalist=n.array_awplalist,t.videoId=n.array.videoId,t.$broadcast("scroll.refreshComplete"),a.hide(),t.initApp()}}(this),function(e){return function(e){return t.$broadcast("scroll.refreshComplete")}}(this)),a.hide()):t.checkNetwork=!1},t.singlePlayService=function(t){return n.singleVideoarray.movie_id=t.movie_id,n.singleVideoarray.singleVideoarray=t,i.navigate("init")},t.initApp=function(){var e,r;return r=o.innerWidth,e=o.innerHeight,t.used_height=159,t.hgt=e+3-t.used_height,i.isOnline()?(h(),t.display="result"):(t.checkNetwork=!1,t.display="nonetwork",broadcastOnComplete())},h=function(){var e,i,r,a;return a=[],e=[],r=[],i=[],t.allContentArray=[],a.push({order:1,cardtitle:"Weekly Premiere",p:"Carefully handpicked, just for you.",iconimg:"weekly_premiere",content:n.array,addedToWatchList:0,movieId:n.array.movie_id}),e=_.map(n.array_addition,function(t,e,i){return{order:2,cardtitle:"New Additions",p:"Just starting out on their big journey!",iconimg:"new_additions",content:t,addedToWatchList:0,movieId:t.movie_id}}),r=_.map(n.array_noteworthy,function(t,e,i){return{order:3,cardtitle:"Noteworthy",p:"Completely out of the ordinary",iconimg:"noteworthy",content:t,addedToWatchList:0,movieId:t.movie_id}}),i.push({order:4,cardtitle:"Awesome Playlist",p:"Sit back and relax with some popcorn!",iconimg:"awesome_playlists",content:n.array_awplalist,addedToWatchList:0,movieId:""}),t.refreshSwiper=!1,c(function(){return t.refreshSwiper=!0,t.allContentArray=_.union(a,e,r,i),t.currentCard=t.allContentArray[0],p()},100)},p=function(){return s.watchlistDetails("get").then(function(e){return _.isNull(e)&&(e=[]),t.getwatchlistDetails=e,t.checkIfaddedlist()})}}]);